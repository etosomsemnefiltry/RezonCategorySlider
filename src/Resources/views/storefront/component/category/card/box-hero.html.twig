{% block component_category_box_hero %}
    {% set category = category %}
    {% set name = category.translated.name %}
    {% set id = category.id %}
    {% set media = null %}
    {% if category.media is not null %}
        {% if category.media.url is defined %}
            {% set media = category.media %}
        {% else %}
            {% set media = category.media|first %}
        {% endif %}
    {% endif %}

    {# Generate absolute URL with domain and base path #}
    {# External links already have full URL, use directly without any processing #}
    {% set categoryUrl = null %}
    {% set baseUrl = app.request.schemeAndHttpHost ~ app.request.basePath %}
    
    {% if category.url %}
        {# Internal link - check if already has domain #}
        {% if category.url matches '/^https?:\\/\\//' %}
            {# Already has full URL, use as is #}
            {% set categoryUrl = category.url %}
        {% else %}
            {# Relative link, add domain and base path #}
            {% set categoryUrl = baseUrl ~ category.url %}
        {% endif %}
    {% else %}
        {# No URL provided, generate SEO URL #}
        {% set seoPath = seoUrl('frontend.navigation.page', {'navigationId': id}) %}
        {% set categoryUrl = seoPath %}
    {% endif %}

    <div class="card category-hero-card">
        <div class="category-hero-card__inner card-body">
            {% block component_category_box_hero_image %}
                <div class="category-hero-card__image-container">
                    {% if media is not null %}
                        {% block component_category_box_hero_image_link %}
                            <a href="{% if category.externalLink %}{{ category.externalLink }}{% else %}{{ categoryUrl }}{% endif %}"
                               class="category-hero-card__image-link"
                               title="{{ name }}"
                               {% if category.externalLink %}target="_blank" rel="noopener"{% endif %}>
                                {% block component_category_box_hero_image_element %}
                                    <img src="{{ media.url }}"
                                         class="category-hero-card__image img-fluid"
                                         alt="{{ media.translated.alt ?: name }}"
                                         title="{{ media.translated.title ?: name }}">
                                {% endblock %}
                            </a>
                        {% endblock %}
                    {% else %}
                        {% block component_category_box_hero_image_placeholder %}
                            <div class="category-hero-card__image-placeholder">
                                {% sw_icon 'placeholder' style {'size': 'fluid'} %}
                            </div>
                        {% endblock %}
                    {% endif %}
                </div>
            {% endblock %}

            {% block component_category_box_hero_content %}
                <div class="category-hero-card__content">
                    {% block component_category_box_hero_name %}
                        <h3 class="category-hero-card__name">
                            <a href="{% if category.externalLink %}{{ category.externalLink }}{% else %}{{ categoryUrl }}{% endif %}"
                               class="category-hero-card__name-link"
                               title="{{ name }}"
                               {% if category.externalLink %}target="_blank" rel="noopener"{% endif %}>
                                {{ name }}
                            </a>
                        </h3>
                    {% endblock %}
                </div>
            {% endblock %}
        </div>
    </div>
{% endblock %}

